$("head").append('<link href="../Common/extensions/TimelineWidget/ui/timeline/jslibrary/timeline.min.css" rel="stylesheet">');$("body").append('<script type="text/javascript" src="../Common/extensions/TimelineWidget/ui/timeline/jslibrary/timeline.min.js">\x3c/script>');
TW.Runtime.Widgets.timeline=function(){var c=this,e=(new Date).getTime()+"_"+Math.floor(1E3*Math.random());this.runtimeProperties=function(){return{supportsAutoResize:!0,needsDataLoadingAndError:!1}};this.renderHtml=function(){return'<div class="widget-content widget-timeline widget-timeline-'+e+'"></div>'};this.afterRender=function(){};this.resize=function(a,c){};this.serviceInvoked=function(a){};this.updateProperty=function(a){"timeline"===a.TargetProperty?(this.setProperty("timeline",a.RawSinglePropertyValue||
a.RawDataFromInvoke),this.initTimeline()):"startIndex"===a.TargetProperty?(this.setProperty("startIndex",a.RawSinglePropertyValue||a.RawDataFromInvoke),this.initTimeline()):this.setProperty(a.TargetProperty,a.RawSinglePropertyValue||a.RawDataFromInvoke)};this.initTimeline=function(){c.setProperty("selectedIndex",-1);c.setProperty("selectedItem",null);c.updateSelection("timeline",[]);var a=$(".widget-timeline-"+e).empty(),g=$('<div class="timeline timeline-'+e+'"></div>').appendTo(a);g=$('<div class="timeline__wrap"></div>').appendTo(g);
var h=$('<div class="timeline__items"></div>').appendTo(g),b=c.getProperty("timeline");g=c.getProperty("debugMode");if(b&&b.rows){for(var n=b.isCompressed?b.dataShape.fieldDefinitions.content.alias:"content",p=b.isCompressed?b.dataShape.fieldDefinitions.selectable.alias:"selectable",k=b.isCompressed?b.dataShape.fieldDefinitions.backgroundColor.alias:"backgroundColor",l=b.isCompressed?b.dataShape.fieldDefinitions.borderColor.alias:"borderColor",m=b.isCompressed?b.dataShape.fieldDefinitions.timelineColorUntilHere.alias:
"timelineColorFromlHere",f="",d=0;d<b.rows.length;d++){var q=$('<div class="timeline__item timeline__item_'+d+'"></div>').appendTo(h);$('<div class="timeline__content">'+b.rows[d][n]+"</div>").appendTo(q);b.rows[d][p]&&(f+=".widget-timeline-"+e+" .timeline__item_"+d+":after {cursor: pointer !important}",$(".widget-timeline-"+e+" .timeline__item_"+d).click(function(){var a=$(this).index();c.setProperty("selectedIndex",a);c.setProperty("selectedItem",TW.InfoTableUtilities.CloneInfoTable({dataShape:b.dataShape,
rows:b.rows.filter((b,c)=>a===c)}));c.updateSelection("timeline",[a]);c.jqElement.triggerHandler("ItemSelected")}));b.rows[d][k]&&(f+=".widget-timeline-"+e+" .timeline__item_"+d+":after {background-color: "+b.rows[d][k]+" !important}");b.rows[d][l]&&(f+=".widget-timeline-"+e+" .timeline__item_"+d+":after {border-color: "+b.rows[d][l]+" !important}");b.rows[d][m]&&(f+=".widget-timeline-"+e+" .timeline__item_"+d+":before {background: "+b.rows[d][m]+"}")}f&&$("<style>"+f+"</style>").prependTo(a);a=c.getProperty("verticalAlignment");
h="top"===a?a:a.substring(0,a.indexOf("-"));$(".timeline-"+e).timeline({mode:"horizontal",forceVerticalMode:10,horizontalStartPosition:h,moveItems:c.getProperty("moveItems"),startIndex:c.getProperty("startIndex"),visibleItems:c.getProperty("visibleItems")});if("top"===a){var r=new MutationObserver(c.observe);$(".timeline-"+e).addClass("timeline-all-top");$(".timeline-"+e+" .timeline__item--bottom").css("transform","translateY(0px)").removeClass("timeline__item--bottom").addClass("timeline__item--top").each(function(a){r.observe(this,
{attributeFilter:["class"]})})}g&&console.log("Timeline - Inited");c.jqElement.triggerHandler("Inited")}};this.observe=function(a){for(var c of a)"class"===c.attributeName&&$(c.target).css("transform","translateY(0px)").removeClass("timeline__item--bottom")}};