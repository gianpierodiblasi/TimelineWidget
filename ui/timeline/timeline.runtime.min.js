$("head").append('<link href="../Common/extensions/TimelineWidget/ui/timeline/jslibrary/timeline.min.css" rel="stylesheet">');$("body").append('<script type="text/javascript" src="../Common/extensions/TimelineWidget/ui/timeline/jslibrary/timeline.min.js">\x3c/script>');
TW.Runtime.Widgets.timeline=function(){var a=this,d=(new Date).getTime()+"_"+Math.floor(1E3*Math.random());this.runtimeProperties=function(){return{supportsAutoResize:!0,needsDataLoadingAndError:!1}};this.renderHtml=function(){return'<div class="widget-content widget-timeline widget-timeline-'+d+'"></div>'};this.afterRender=function(){};this.resize=function(a,d){};this.serviceInvoked=function(a){};this.updateProperty=function(a){"timeline"===a.TargetProperty?(this.setProperty("timeline",a.RawSinglePropertyValue||
a.RawDataFromInvoke),this.initTimeline()):"startIndex"===a.TargetProperty?(this.setProperty("startIndex",a.RawSinglePropertyValue||a.RawDataFromInvoke),this.initTimeline()):this.setProperty(a.TargetProperty,a.RawSinglePropertyValue||a.RawDataFromInvoke)};this.initTimeline=function(){a.setProperty("selectedIndex",-1);a.setProperty("selectedItem",null);a.updateSelection("timeline",[]);var g=$(".widget-timeline-"+d).empty(),f=$('<div class="timeline timeline-'+d+'"></div>').appendTo(g);f=$('<div class="timeline__wrap"></div>').appendTo(f);
f=$('<div class="timeline__items"></div>').appendTo(f);var b=a.getProperty("timeline"),m=a.getProperty("debugMode");if(b&&b.rows){for(var n=b.isCompressed?b.dataShape.fieldDefinitions.content.alias:"content",p=b.isCompressed?b.dataShape.fieldDefinitions.selectable.alias:"selectable",h=b.isCompressed?b.dataShape.fieldDefinitions.backgroundColor.alias:"backgroundColor",k=b.isCompressed?b.dataShape.fieldDefinitions.borderColor.alias:"borderColor",l=b.isCompressed?b.dataShape.fieldDefinitions.timelineColorUntilHere.alias:
"timelineColorFromlHere",e="",c=0;c<b.rows.length;c++){var q=$('<div class="timeline__item timeline__item_'+c+'"></div>').appendTo(f);$('<div class="timeline__content">'+b.rows[c][n]+"</div>").appendTo(q);b.rows[c][p]&&(e+=".widget-timeline-"+d+" .timeline__item_"+c+":after {cursor: pointer !important}",$(".widget-timeline-"+d+" .timeline__item_"+c).click(function(){var c=$(this).index();a.setProperty("selectedIndex",c);a.setProperty("selectedItem",TW.InfoTableUtilities.CloneInfoTable({dataShape:b.dataShape,
rows:b.rows.filter((a,b)=>c===b)}));a.updateSelection("timeline",[c]);a.jqElement.triggerHandler("ItemSelected")}));b.rows[c][h]&&(e+=".widget-timeline-"+d+" .timeline__item_"+c+":after {background-color: "+b.rows[c][h]+" !important}");b.rows[c][k]&&(e+=".widget-timeline-"+d+" .timeline__item_"+c+":after {border-color: "+b.rows[c][k]+" !important}");b.rows[c][l]&&(e+=".widget-timeline-"+d+" .timeline__item_"+c+":before {background: "+b.rows[c][l]+"}")}e&&$("<style>"+e+"</style>").prependTo(g);$(".timeline-"+
d).timeline({mode:"horizontal",forceVerticalMode:10,horizontalStartPosition:a.getProperty("horizontalStartPosition"),moveItems:a.getProperty("moveItems"),startIndex:a.getProperty("startIndex"),visibleItems:a.getProperty("visibleItems")});m&&console.log("Timeline - Inited");a.jqElement.triggerHandler("Inited")}}};