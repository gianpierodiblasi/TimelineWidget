$("head").append('<link href="../Common/extensions/TimelineWidget/ui/timeline/jslibrary/timeline.min.css" rel="stylesheet">');$("body").append('<script type="text/javascript" src="../Common/extensions/TimelineWidget/ui/timeline/jslibrary/timeline.min.js">\x3c/script>');
TW.Runtime.Widgets.timeline=function(){var b=this,e=(new Date).getTime()+"_"+Math.floor(1E3*Math.random());this.runtimeProperties=function(){return{supportsAutoResize:!0,needsDataLoadingAndError:!1}};this.renderHtml=function(){return'<div class="widget-content widget-timeline widget-timeline-'+e+'"></div>'};this.afterRender=function(){};this.resize=function(a,b){};this.serviceInvoked=function(a){};this.updateProperty=function(a){"timeline"===a.TargetProperty?(this.setProperty("timeline",a.RawSinglePropertyValue||
a.RawDataFromInvoke),this.initTimeline()):"startIndex"===a.TargetProperty?(this.setProperty("startIndex",a.RawSinglePropertyValue||a.RawDataFromInvoke),this.initTimeline()):this.setProperty(a.TargetProperty,a.RawSinglePropertyValue||a.RawDataFromInvoke)};this.initTimeline=function(){b.setProperty("selectedIndex",-1);b.setProperty("selectedItem",null);b.updateSelection("timeline",[]);var a=$(".widget-timeline-"+e).empty(),g=$('<div class="timeline timeline-'+e+'"></div>').appendTo(a);g=$('<div class="timeline__wrap"></div>').appendTo(g);
var h=$('<div class="timeline__items"></div>').appendTo(g),c=b.getProperty("timeline");g=b.getProperty("debugMode");if(c&&c.rows){for(var p=c.isCompressed?c.dataShape.fieldDefinitions.content.alias:"content",q=c.isCompressed?c.dataShape.fieldDefinitions.selectable.alias:"selectable",l=c.isCompressed?c.dataShape.fieldDefinitions.backgroundColor.alias:"backgroundColor",m=c.isCompressed?c.dataShape.fieldDefinitions.borderColor.alias:"borderColor",n=c.isCompressed?c.dataShape.fieldDefinitions.timelineColorUntilHere.alias:
"timelineColorFromlHere",f="",d=0;d<c.rows.length;d++){var r=$('<div class="timeline__item timeline__item_'+d+'"></div>').appendTo(h);$('<div class="timeline__content">'+c.rows[d][p]+"</div>").appendTo(r);c.rows[d][q]&&(f+=".widget-timeline-"+e+" .timeline__item_"+d+":after {cursor: pointer !important}",$(".widget-timeline-"+e+" .timeline__item_"+d).click(function(){var a=$(this).index();b.setProperty("selectedIndex",a);b.setProperty("selectedItem",TW.InfoTableUtilities.CloneInfoTable({dataShape:c.dataShape,
rows:c.rows.filter((c,b)=>a===b)}));b.updateSelection("timeline",[a]);b.jqElement.triggerHandler("ItemSelected")}));c.rows[d][l]&&(f+=".widget-timeline-"+e+" .timeline__item_"+d+":after {background-color: "+c.rows[d][l]+" !important}");c.rows[d][m]&&(f+=".widget-timeline-"+e+" .timeline__item_"+d+":after {border-color: "+c.rows[d][m]+" !important}");c.rows[d][n]&&(f+=".widget-timeline-"+e+" .timeline__item_"+d+":before {background: "+c.rows[d][n]+"}")}f&&$("<style>"+f+"</style>").prependTo(a);a=b.getProperty("verticalAlignment");
h="top"===a||"bottom"===a?a:a.substring(0,a.indexOf("-"));$(".timeline-"+e).timeline({mode:"horizontal",forceVerticalMode:10,horizontalStartPosition:h,moveItems:b.getProperty("moveItems"),startIndex:b.getProperty("startIndex"),visibleItems:b.getProperty("visibleItems")});if("top"===a){var k=new MutationObserver(b.observeTop);$(".timeline-"+e).addClass("timeline-all-top");$(".timeline-"+e+" .timeline__item--bottom").removeClass("timeline__item--bottom").addClass("timeline__item--top").each(function(a){k.observe(this,
{attributeFilter:["class"]})})}else"bottom"===a&&(k=new MutationObserver(b.observeBottom),$(".timeline-"+e).addClass("timeline-all-bottom"),$(".timeline-"+e+" .timeline__item").removeClass("timeline__item--top").addClass("timeline__item--bottom").each(function(a){k.observe(this,{attributeFilter:["class"]})}));g&&console.log("Timeline - Inited");b.jqElement.triggerHandler("Inited")}};this.observeTop=function(a){for(var b of a)"class"===b.attributeName&&$(b.target).removeClass("timeline__item--bottom")};
this.observeBottom=function(a){for(var b of a)"class"===b.attributeName&&$(b.target).removeClass("timeline__item--top")}};